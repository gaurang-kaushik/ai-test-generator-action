✅ Dependencies installed
Run echo "🚀 Starting AI Test Generator..."
🚀 Starting AI Test Generator...
📋 Environment variables:
  - SOURCE_PATH: JtProject/src/main/java
  - TEST_PATH: JtProject/src/test/java
  - BASE_SHA: 505803be16c09867eed35ee47e7e2c204d7ab503
  - HEAD_SHA: 3dbb796dfb9106c52c1f4d65d65f9a636a36ddab
  - MODEL: gemini-2.0-pro-exp
  - GOOGLE_API_KEY: AIzaSyCacd...

🔍 Checking for changed files...
🔍 Starting ci_generate_tests.py...
📋 Git SHAs - BASE: 505803be16c09867eed35ee47e7e2c204d7ab503, HEAD: 3dbb796dfb9106c52c1f4d65d65f9a636a36ddab
🔍 Getting changed Java files...
🔍 Attempting git diff: 505803be16c09867eed35ee47e7e2c204d7ab503..3dbb796dfb9106c52c1f4d65d65f9a636a36ddab
✅ Git diff successful: 505803be16c09867eed35ee47e7e2c204d7ab503..3dbb796dfb9106c52c1f4d65d65f9a636a36ddab
🎯 Found 5 changed Java files - generating tests only for these
  - JtProject/src/main/java/com/jtspringproject/JtSpringProject/JtSpringProjectApplication.java
  - JtProject/src/main/java/com/jtspringproject/JtSpringProject/models/Category.java
  - JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/categoryService.java
  - JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/productService.java
  - JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/userService.java
📁 Found 5 changed Java files
Generating test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/JtSpringProjectApplication.java -> /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/JtSpringProjectApplicationTest.java
Generating test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/models/Category.java -> /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/models/CategoryTest.java
Generating test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/categoryService.java -> /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java
Generating test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/productService.java -> /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/productServiceTest.java
Generating test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/userService.java -> /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/userServiceTest.java
✅ Initial test generation completed
Run echo "🔍 Running Maven tests with coverage..."
🔍 Running Maven tests with coverage...
[INFO] Scanning for projects...
Downloading from central: https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-starter-parent/2.6.4/spring-boot-starter-parent-2.6.4.pom
Progress (1): 1.4/8.6 kB
Progress (1): 2.8/8.6 kB
Progress (1): 4.1/8.6 kB
Progress (1): 5.5/8.6 kB
Progress (1): 6.9/8.6 kB
Progress (1): 8.3/8.6 kB
Progress (1): 8.6 kB    
                    
Downloaded from central: https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-starter-parent/2.6.4/spring-boot-starter-parent-2.6.4.pom (8.6 kB at 15 kB/s)
Downloading from central: https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-dependencies/2.6.4/spring-boot-dependencies-2.6.4.pom
Progress (1): 1.4/105 kB
Progress (1): 2.8/105 kB
Progress (1): 4.1/105 kB
Progress (1): 5.5/105 kB
Progress (1): 6.9/105 kB
Progress (1): 8.3/105 kB
Progress (1): 9.7/105 kB
Progress (1): 11/105 kB 
Progress (1): 12/105 kB
Progress (1): 14/105 kB
Progress (1): 15/105 kB
Progress (1): 16/105 kB
Progress (1): 33/105 kB
Progress (1): 49/105 kB
Progress (1): 64/105 kB
Progress (1): 81/105 kB


[INFO] Changes detected - recompiling the module!
[INFO] Compiling 22 source files to /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/target/classes
[INFO] /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/dao/cartProductDao.java: Some input files use unchecked or unsafe operations.
[INFO] /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/dao/cartProductDao.java: Recompile with -Xlint:unchecked for details.
[INFO] 
[INFO] --- resources:3.2.0:testResources (default-testResources) @ JtSpringProject ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Using 'UTF-8' encoding to copy filtered properties files.
[INFO] skip non existing resourceDirectory /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/resources
[INFO] 
[INFO] --- compiler:3.8.1:testCompile (default-testCompile) @ JtSpringProject ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 5 source files to /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/target/test-classes
[INFO] -------------------------------------------------------------
Error:  COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[61,28] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
  required: no arguments
  found: int,java.lang.String
  reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[62,28] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
  required: no arguments
  found: int,java.lang.String
  reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[83,33] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
  required: no arguments
  found: int,java.lang.String
  reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[94,33] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
  required: no arguments
  found: int,java.lang.String
  reason: actual and formal argument lists differ in length
[INFO] 4 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  10.740 s
[INFO] Finished at: 2025-09-13T14:42:42Z
[INFO] ------------------------------------------------------------------------
Error:  Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile (default-testCompile) on project JtSpringProject: Compilation failure: Compilation failure: 
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[61,28] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
Error:    required: no arguments
Error:    found: int,java.lang.String
Error:    reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[62,28] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
Error:    required: no arguments
Error:    found: int,java.lang.String
Error:    reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[83,33] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
Error:    required: no arguments
Error:    found: int,java.lang.String
Error:    reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/com/jtspringproject/JtSpringProject/services/categoryServiceTest.java:[94,33] constructor Category in class com.jtspringproject.JtSpringProject.models.Category cannot be applied to given types;
Error:    required: no arguments
Error:    found: int,java.lang.String
Error:    reason: actual and formal argument lists differ in length
Error:  -> [Help 1]
Error:  
Error:  To see the full stack trace of the errors, re-run Maven with the -e switch.
Error:  Re-run Maven using the -X switch to enable full debug logging.
Error:  
Error:  For more information about the errors and possible solutions, please read the following articles:
Error:  [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
⚠️ Some tests failed, continuing with error-driven iteration
✅ Maven tests completed
Run echo "🔄 Starting error-driven test improvement..."
🔄 Starting error-driven test improvement...
🔄 Starting error-driven test improvement...
🎯 Error iteration focusing on 5 changed files only
Found 5 Java source files

🔄 Iteration 1/5
🧪 Running Maven tests...
❌ Tests failing with 29 error(s)
🔍 Error details:
  Error 1: [INFO] Compiling 5 source files to /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/target/test-classes
[INFO] --------------------------------------------------...
Error:  2: [ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/te...
  Error 3:   found: int,java.lang.String
  reason: actual and formal argument lists differ in length
Error:  /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/test/java/...
📝 Processing JtSpringProjectApplication.java -> JtSpringProjectApplicationTest.java
🔧 Generating improved test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/JtSpringProjectApplication.java based on errors...
❌ Failed to generate test for JtSpringProjectApplication.java
📝 Processing Category.java -> CategoryTest.java
🔧 Generating improved test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/models/Category.java based on errors...
❌ Failed to generate test for Category.java
📝 Processing categoryService.java -> categoryServiceTest.java
🔧 Generating improved test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/categoryService.java based on errors...
❌ Failed to generate test for categoryService.java
📝 Processing productService.java -> productServiceTest.java
🔧 Generating improved test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/productService.java based on errors...
❌ Failed to generate test for productService.java
📝 Processing userService.java -> userServiceTest.java
🔧 Generating improved test for /home/runner/work/E-commerce-project-springBoot/E-commerce-project-springBoot/JtProject/src/main/java/com/jtspringproject/JtSpringProject/services/userService.java based on errors...
❌ Failed to generate test for userService.java
❌ No tests could be improved this iteration
🧪 Running Maven tests...

📊 Final Results:
  Tests passing: ❌
  Coverage: 0.0% (target: 80.0%)
❌ Some tests still failing after error-driven iteration
Error: Process completed with exit code 1.
